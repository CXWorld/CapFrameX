<Window x:Class="CapFrameX.DebugMonitorWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="Debug Monitor"
        Height="400"
        Width="500"
        WindowStartupLocation="Manual"
        Left="50"
        Top="50"
        Topmost="True"
        Background="#FF1E1E1E"
        Foreground="White">
    <Grid Margin="10">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
        </Grid.RowDefinitions>

        <!-- CapFrameX Process Stats -->
        <GroupBox Grid.Row="0" Header="CapFrameX.exe" Margin="0,0,0,10"
                  Foreground="White" BorderBrush="#FF3E3E3E">
            <Grid Margin="5">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="*"/>
                </Grid.ColumnDefinitions>
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="Auto"/>
                </Grid.RowDefinitions>

                <TextBlock Grid.Row="0" Grid.Column="0" Text="CPU Usage:" Margin="0,2"/>
                <TextBlock Grid.Row="0" Grid.Column="1" Text="{Binding CapFrameXCpuUsage, StringFormat={}{0:F1} %}"
                           Foreground="#FF00BFFF" FontWeight="Bold" Margin="0,2"/>

                <TextBlock Grid.Row="1" Grid.Column="0" Text="Memory Usage:" Margin="0,2"/>
                <TextBlock Grid.Row="1" Grid.Column="1" Text="{Binding CapFrameXMemoryUsage, StringFormat={}{0:F1} MB}"
                           Foreground="#FF00FF7F" FontWeight="Bold" Margin="0,2"/>
            </Grid>
        </GroupBox>

        <!-- PresentMon Process Stats -->
        <GroupBox Grid.Row="1" Header="PresentMon-2.4.0-x64.exe" Margin="0,0,0,10"
                  Foreground="White" BorderBrush="#FF3E3E3E">
            <Grid Margin="5">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="*"/>
                </Grid.ColumnDefinitions>
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="Auto"/>
                </Grid.RowDefinitions>

                <TextBlock Grid.Row="0" Grid.Column="0" Text="CPU Usage:" Margin="0,2"/>
                <TextBlock Grid.Row="0" Grid.Column="1" Text="{Binding PresentMonCpuUsage, StringFormat={}{0:F1} %}"
                           Foreground="#FF00BFFF" FontWeight="Bold" Margin="0,2"/>

                <TextBlock Grid.Row="1" Grid.Column="0" Text="Memory Usage:" Margin="0,2"/>
                <TextBlock Grid.Row="1" Grid.Column="1" Text="{Binding PresentMonMemoryUsage, StringFormat={}{0:F1} MB}"
                           Foreground="#FF00FF7F" FontWeight="Bold" Margin="0,2"/>

                <TextBlock Grid.Row="2" Grid.Column="0" Text="Status:" Margin="0,2"/>
                <TextBlock Grid.Row="2" Grid.Column="1" Text="{Binding PresentMonStatus}"
                           Foreground="#FFFFA500" FontWeight="Bold" Margin="0,2"/>
            </Grid>
        </GroupBox>

        <!-- ETW Buffer Status -->
        <GroupBox Grid.Row="2" Header="ETW Buffer Status" Margin="0,0,0,10"
                  Foreground="White" BorderBrush="#FF3E3E3E">
            <Grid Margin="5">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="*"/>
                </Grid.ColumnDefinitions>
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="Auto"/>
                </Grid.RowDefinitions>

                <TextBlock Grid.Row="0" Grid.Column="0" Text="Buffer Fill %:" Margin="0,2"/>
                <TextBlock Grid.Row="0" Grid.Column="1" Text="{Binding EtwBufferFillPct, StringFormat={}{0:F1} %}"
                           Foreground="#FFFFCC00" FontWeight="Bold" Margin="0,2"/>

                <TextBlock Grid.Row="1" Grid.Column="0" Text="Buffers In Use:" Margin="0,2"/>
                <TextBlock Grid.Row="1" Grid.Column="1" Text="{Binding EtwBuffersInUse}"
                           Foreground="#FF87CEEB" FontWeight="Bold" Margin="0,2"/>

                <TextBlock Grid.Row="2" Grid.Column="0" Text="Total Buffers:" Margin="0,2"/>
                <TextBlock Grid.Row="2" Grid.Column="1" Text="{Binding EtwTotalBuffers}"
                           Foreground="#FF87CEEB" FontWeight="Bold" Margin="0,2"/>

                <TextBlock Grid.Row="3" Grid.Column="0" Text="Events Lost:" Margin="0,2"/>
                <TextBlock Grid.Row="3" Grid.Column="1" Text="{Binding EtwEventsLost}"
                           Foreground="#FFFF4444" FontWeight="Bold" Margin="0,2"/>

                <TextBlock Grid.Row="4" Grid.Column="0" Text="Buffers Lost:" Margin="0,2"/>
                <TextBlock Grid.Row="4" Grid.Column="1" Text="{Binding EtwBuffersLost}"
                           Foreground="#FFFF4444" FontWeight="Bold" Margin="0,2"/>
            </Grid>
        </GroupBox>

        <!-- Update Info -->
        <TextBlock Grid.Row="3" Text="{Binding LastUpdateTime, StringFormat=Last updated: {0:HH:mm:ss.fff}}"
                   VerticalAlignment="Bottom" HorizontalAlignment="Right"
                   Foreground="Gray" FontSize="10"/>
    </Grid>
</Window>
